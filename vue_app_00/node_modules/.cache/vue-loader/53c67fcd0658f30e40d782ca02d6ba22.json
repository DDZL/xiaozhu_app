{"remainingRequest":"G:\\project_vue\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\project_vue\\vue_app_00\\src\\components\\tabbar\\ShopCart.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"G:\\project_vue\\vue_app_00\\src\\components\\tabbar\\ShopCart.vue","mtime":1555147012000},{"path":"G:\\project_vue\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"G:\\project_vue\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907990000},{"path":"G:\\project_vue\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\project_vue\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557370988000},{"path":"G:\\project_vue\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.mui-media-body{\r\n  height: 50px;\r\n  padding-top: 3px;\r\n}\r\n  .mui-ellipsis{\r\n    padding-top: 5px;\r\n  }\r\n",{"version":3,"sources":["ShopCart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiNA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ShopCart.vue","sourceRoot":"src\\components\\tabbar","sourcesContent":["<template>\r\n  <div class=\"app-shopcart\">\r\n    <div class=\"mui-card\">\r\n\t\t\t\t<div class=\"mui-card-header\">\r\n          全选\r\n          <input type=\"checkbox\"  @change=\"selectAll\"\r\n          :checked=\"allcb\"/> \r\n        </div>\r\n\t\t\t\t<div class=\"mui-card-content\">\r\n\t\t\t\t\t<div class=\"mui-card-content-inner\">\r\n            <ul class=\"mui-table-view\">\r\n\t\t\t\t<li class=\"mui-table-view-cell mui-media\" v-for=\"(item,i) of list\" :key=\"item.id\">\r\n\t\t\t\t\t<a href=\"javascript:;\">\r\n\t\t\t\t\t\t<img class=\"mui-media-object mui-pull-left\" src=\"\">\r\n\t\t\t\t\t\t<div class=\"mui-media-body\">\r\n\t\t\t\t\t\t\t<p class='mui-ellipsis'>\r\n               <!--1:复选框-->\r\n               <input type=\"checkbox\" :checked=\"item.cb\" @change=\"modifyItem\"\r\n               :data-i=\"i\"\r\n               />\r\n               <!--2:商品名称 -->\r\n               {{item.lname}}\r\n               <!--3:商品价格-->\r\n               {{item.price}}\r\n               <!--4:删除按钮-->\r\n               <input type=\"button\" value=\"删除\" @click=\"removeItem\" :data-id=\"item.id\"/>\r\n              </p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</li>\r\n        </ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"mui-card-footer\">\r\n  <input type=\"button\" value=\"删除选中商品\" @click=\"removeSelect\"/>\r\n        </div>\r\n\t\t\t</div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data(){\r\n      return {\r\n        list:[],    //保存购物列表\r\n        allcb:false,//全选状态 默认未选中\r\n      }\r\n    },\r\n    created() {\r\n      this.loadMore();\r\n    },\r\n    methods:{\r\n      modifyItem(e){\r\n        //功能:如果用户选中商品，将当前商品对应对象\r\n        //     cb=true\r\n        //     如果用户取消选中 将当前商品对应对象\r\n        //     cb=false 50\r\n        //1:获取当前元素选中状态\r\n        var cb = e.target.checked;\r\n        //2:获取当前元素对应商品对象\r\n        //2.1:获取当前元素下标   01\r\n        var i = e.target.dataset.i;\r\n        //2.2:将数组下标对象\r\n        this.list[i].cb = cb;\r\n        //3:修改商品对象cb 属性\r\n        \r\n        //4:修改全选状态 true fales  17:32\r\n        //4.1:如果完成  累加计算\r\n        //4.2:创建变量count 保存累加和\r\n        var count = 0;\r\n        //4.3:创建循环遍历所有元素\r\n        //4.4:获取cb如果值等于true count++\r\n        for(var item of this.list){\r\n            if(item.cb){\r\n              count++;\r\n            }\r\n        }\r\n        //4.5:如果count个数与数组长度一致\r\n        if(count==this.list.length){\r\n          //console.log(\"全选选中\");\r\n          this.allcb = true\r\n        }else{\r\n          //console.log(\"全选消空\");\r\n          this.allcb = false;\r\n        }\r\n        //4.6:将全选复选框选中\r\n        //4.7:否则清空全选复选框\r\n\r\n\r\n      },\r\n      removeSelect(){\r\n        //console.log(\"删除选中的商品\");\r\n        //-1:显示确认框 \"是否删除选中商品\"\r\n      this.$messagebox.confirm(\"是否删除选中商品?\")\r\n      .then(action=>{\r\n         // console.log(\"确认\")\r\n         //-2:如果用户选中 确认\r\n         //2.1:获取用户选中商品\r\n         //-创建变量保存删除商品 ids = \"\"\r\n         var ids = \"\";\r\n         //-创建循环遍历数组\r\n         for(var item of this.list){\r\n             if(item.cb){\r\n               ids += item.id+\",\";\r\n             }\r\n         }\r\n         //-如果用户没有选中商品,停止删除操作\r\n         if(ids.length==0){\r\n           this.$toast(\"请选中您需要删除的商品\");\r\n           return;\r\n         }\r\n         //-如果用户选中多个商品 1,2, 去除后面\r\n         //substring(?,?) 截取字符串\r\n         //? 起始位置\r\n         //? 几个\r\n         ids =  ids.substring(0,ids.length-1);\r\n         //console.log(ids);\r\n         //return;\r\n         //-如果当前元素cb:true\r\n         //-获取当前元素id拼字符串 ids+=\"1\"\r\n         //2.2:创建变量  var ids = \"11,12\";\r\n         //var ids = \"1,2\";\r\n         //2.3:发送ajax请求给服务器 /delM\r\n         var url = \"http://127.0.0.1:3000\";\r\n         url+=\"/delM?ids=\"+ids;\r\n         this.axios.get(url).then(result=>{\r\n           //console.log(result.data.msg);\r\n           //2.4:接收服务器返回结果 56\r\n           //2.5:提示   删除成功 或者删除失败\r\n           this.$toast(result.data.msg);\r\n           //2.6:重新加载购物车数据\r\n           this.loadMore();\r\n         })\r\n      }).catch(result=>{\r\n          console.log(\"取消\")\r\n      });\r\n        \r\n        //3:如果用户选中 取消 \r\n      },\r\n      selectAll(e){\r\n        //console.log(12345);\r\n        //1:获取全选状态\r\n        var cb = e.target.checked;\r\n        //2:遍历所有商品\r\n        //3:将全选状态赋值商品选中状态\r\n        for(var item of this.list){\r\n          item.cb = cb;\r\n        }\r\n        //4:修改全选状态\r\n        this.allcb = cb;\r\n      },\r\n      removeItem(e){\r\n        //0:创建确认消息框\r\n      this.$messagebox.confirm(\"是否删除指定商品?\")\r\n      .then(action=>{\r\n        //如果用户选择确定 \r\n        //功能:删除指定商品\r\n        //1:获取商品编号\r\n        var id = e.target.dataset.id;\r\n        //2:创建变量url\r\n        var url = \"http://127.0.0.1:3000\";\r\n        url+=\"/removeCartItem?id=\"+id;\r\n        //3:发送ajax请求\r\n        this.axios.get(url).then(result=>{\r\n          //4:获取返回结果\r\n          //5:判断如果删除成功\r\n          if(result.data.code==1){\r\n             this.$toast(\"删除成功\");\r\n             //数据库己经删除成功\r\n             //网页内容显示新内容[删除后];\r\n             this.loadMore();\r\n             //在页眉添加复选框 []全选\r\n          }else{\r\n             this.$toast(\"删除失败\");\r\n          }\r\n          //6:将当前商品对象删除\r\n        })\r\n      })\r\n      .catch(result=>{\r\n      //如果用户选择取消息\r\n      })\r\n      },\r\n      loadMore(){\r\n        //1:创建变量url\r\n        var url = \"http://127.0.0.1:3000\";\r\n        url+=\"/getCart\";\r\n        //2:发送ajax请求\r\n        this.axios.get(url).then(result=>{\r\n          if(result.data.code < 1){\r\n            this.$toast(\"请登录\");\r\n            this.$router.push(\"/Login\");\r\n            return;\r\n          }\r\n          //2.1:为数组件元素添加属性cb\r\n          //    cb表示复选框状态\r\n          //2.2:原先数组\r\n          var rows = result.data.data;\r\n          //2.3:创建循环遍历数组并且添加属性\r\n          for(var item of rows){\r\n             item.cb = false;\r\n          }    \r\n          //2.4:将添加结果后数组件赋值 list\r\n          this.list = rows;\r\n          //注意:以上二步要求顺序\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n.mui-media-body{\r\n  height: 50px;\r\n  padding-top: 3px;\r\n}\r\n  .mui-ellipsis{\r\n    padding-top: 5px;\r\n  }\r\n</style>"]}]}